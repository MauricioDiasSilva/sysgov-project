{# SysGov_Project/licitacoes/templates/licitacoes/listar_resultados_licitacao.html #}
{% extends 'base.html' %} {# Estende o template base principal #}
{% load static %}

{% block title %}{{ titulo_pagina }}{% endblock title %}

{% block content %}
<div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1>{{ titulo_pagina }}</h1>
        {# Opcional: Adicione um botão para "Registrar Novo Resultado" aqui se houver uma view para isso #}
        {# <a href="{% url 'licitacoes:registrar_resultado_licitacao' %}" class="btn btn-primary">Registrar Novo Resultado</a> #}
    </div>

    {% if resultados %}
    <div class="table-responsive">
        <table class="table table-striped table-hover">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Edital</th>
                    <th>Fornecedor Vencedor</th>
                    <th>Valor Homologado</th>
                    <th>Data Homologação</th>
                    <th>Economia Gerada</th>
                    <th>Ações</th>
                </tr>
            </thead>
            <tbody>
                {% for resultado in resultados %}
                <tr>
                    <td>{{ resultado.pk }}</td>
                    <td>{{ resultado.edital.numero_edital }} - {{ resultado.edital.titulo|truncatechars:50 }}</td>
                    <td>{{ resultado.fornecedor_vencedor }}</td>
                    <td>R$ {{ resultado.valor_homologado|floatformat:2 }}</td>
                    <td>{{ resultado.data_homologacao|date:"d/m/Y" }}</td>
                    <td>R$ {{ resultado.economia_gerada|floatformat:2 }}</td>
                    <td>
                        <a href="{% url 'licitacoes:detalhar_resultado_licitacao' pk=resultado.pk %}" class="btn btn-sm btn-info">Detalhes</a>
                        {# Opcional: Botão para editar, se houver view de edição #}
                        {# <a href="{% url 'licitacoes:editar_resultado_licitacao' pk=resultado.pk %}" class="btn btn-sm btn-warning">Editar</a> #}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <p class="alert alert-info">Nenhum resultado de licitação encontrado.</p>
    {% endif %}
</div>
{% endblock content %}