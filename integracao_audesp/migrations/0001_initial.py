# Generated by Django 5.2.4 on 2025-09-03 16:48

import django.db.models.deletion
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('contenttypes', '0002_remove_content_type_name'),
        ('core', '0001_initial'),
        ('financeiro', '0001_initial'),
        ('licitacoes', '0001_initial'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='AudespConfiguracao',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('municipio_codigo_audesp', models.IntegerField(help_text='Código do município conforme tabela do AUDESP/TCE-SP (ex: 7107 para Carapicuíba).', verbose_name='Código do Município (AUDESP)')),
                ('entidade_codigo_audesp', models.IntegerField(help_text='Código da entidade ou órgão da prefeitura conforme tabela do AUDESP/TCE-SP (ex: 10048).', verbose_name='Código da Entidade (AUDESP)')),
            ],
            options={
                'verbose_name': 'Configuração AUDESP',
                'verbose_name_plural': 'Configurações AUDESP',
            },
        ),
        migrations.CreateModel(
            name='AudespAjusteContratual',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('adesao_participacao', models.BooleanField(default=False, verbose_name='Adesão ou Participação (AUDESP)')),
                ('gerenciadora_jurisdicionada', models.BooleanField(blank=True, default=False, null=True, verbose_name='Gerenciadora Jurisdicionada TCE-SP (AUDESP)')),
                ('cnpj_gerenciadora', models.CharField(blank=True, max_length=14, null=True, verbose_name='CNPJ Gerenciadora (AUDESP)')),
                ('municipio_gerenciador', models.IntegerField(blank=True, null=True, verbose_name='Município Gerenciador (Cód. AUDESP)')),
                ('entidade_gerenciadora', models.IntegerField(blank=True, null=True, verbose_name='Entidade Gerenciadora (Cód. AUDESP)')),
                ('codigo_edital_audesp', models.CharField(blank=True, max_length=25, null=True, verbose_name='Código Edital (AUDESP)')),
                ('codigo_ata_rp_audesp', models.CharField(blank=True, max_length=30, null=True, verbose_name='Código Ata RP (AUDESP)')),
                ('codigo_contrato_audesp', models.CharField(max_length=25, unique=True, verbose_name='Código Ajuste/Contrato (AUDESP)')),
                ('retificacao', models.BooleanField(default=False, verbose_name='É Retificação (AUDESP)')),
                ('fonte_recursos_contratacao', models.JSONField(blank=True, default=list, null=True, verbose_name='Fontes de Recursos')),
                ('itens_contratados_ids', models.JSONField(blank=True, default=list, null=True, verbose_name='IDs dos Itens Contratados')),
                ('tipo_contrato_id', models.IntegerField(choices=[(1, 'Contrato Original'), (2, 'Termo Aditivo'), (3, 'Apostilamento'), (4, 'Rescisão Contratual'), (5, 'Reajuste'), (7, 'Supressão'), (8, 'Acrescimento'), (12, 'Outros')], verbose_name='Tipo de Contrato (PNCP)')),
                ('numero_contrato_empenho', models.CharField(max_length=50, verbose_name='Número Contrato/Empenho')),
                ('ano_contrato', models.IntegerField(verbose_name='Ano do Contrato')),
                ('processo_sistema_origem', models.CharField(max_length=50, verbose_name='Número Processo (Sistema Origem)')),
                ('categoria_processo_id', models.IntegerField(choices=[(1, 'Licitação'), (2, 'Dispensa de Licitação'), (3, 'Inexigibilidade de Licitação'), (4, 'Concurso'), (5, 'Leilão'), (6, 'Concessão de Serviço Público'), (7, 'Permissão de Serviço Público'), (8, 'Parceria Público-Privada (PPP)'), (9, 'Convênio'), (10, 'Termo de Fomento'), (11, 'Termo de Colaboração')], verbose_name='Categoria do Processo (PNCP)')),
                ('receita', models.BooleanField(verbose_name='Gera Receita para a Entidade?')),
                ('despesas_classificacao', models.JSONField(blank=True, default=list, null=True, verbose_name='Classificações de Despesa')),
                ('codigo_unidade', models.CharField(blank=True, max_length=30, null=True, verbose_name='Código da Unidade (PNCP)')),
                ('ni_fornecedor', models.CharField(max_length=50, verbose_name='NI do Fornecedor')),
                ('tipo_pessoa_fornecedor', models.CharField(choices=[('PJ', 'Pessoa Jurídica'), ('PF', 'Pessoa Física'), ('PE', 'Estrangeiro')], max_length=2, verbose_name='Tipo de Pessoa Fornecedor')),
                ('nome_razao_social_fornecedor', models.CharField(max_length=100, verbose_name='Nome/Razão Social Fornecedor')),
                ('ni_fornecedor_subcontratado', models.CharField(blank=True, max_length=50, null=True, verbose_name='NI Fornecedor Subcontratado')),
                ('tipo_pessoa_fornecedor_subcontratado', models.CharField(blank=True, choices=[('PJ', 'Pessoa Jurídica'), ('PF', 'Pessoa Física'), ('PE', 'Estrangeiro')], max_length=2, null=True, verbose_name='Tipo Pessoa Fornecedor Subcontratado')),
                ('nome_razao_social_fornecedor_subcontratado', models.CharField(blank=True, max_length=100, null=True, verbose_name='Nome/Razão Social Fornecedor Subcontratado')),
                ('objeto_contrato', models.TextField(max_length=5120, verbose_name='Objeto do Contrato')),
                ('informacao_complementar', models.TextField(blank=True, max_length=5120, null=True, verbose_name='Informações Complementares')),
                ('valor_inicial', models.DecimalField(decimal_places=4, max_digits=17, verbose_name='Valor Inicial do Ajuste (R$)')),
                ('numero_parcelas', models.IntegerField(blank=True, null=True, verbose_name='Número de Parcelas')),
                ('valor_parcela', models.DecimalField(blank=True, decimal_places=4, max_digits=17, null=True, verbose_name='Valor da Parcela (R$)')),
                ('valor_global', models.DecimalField(decimal_places=4, max_digits=17, verbose_name='Valor Global do Ajuste (R$)')),
                ('valor_acumulado', models.DecimalField(decimal_places=4, max_digits=17, verbose_name='Valor Acumulado do Ajuste (R$)')),
                ('data_assinatura', models.DateField(verbose_name='Data de Assinatura')),
                ('data_vigencia_inicio', models.DateField(verbose_name='Data de Início da Vigência')),
                ('data_vigencia_fim', models.DateField(verbose_name='Data de Fim da Vigência')),
                ('vigencia_meses', models.IntegerField(blank=True, null=True, verbose_name='Vigência em Meses')),
                ('tipo_objeto_contrato', models.IntegerField(blank=True, choices=[(1, 'Aquisição de Bens'), (2, 'Prestação de Serviços'), (3, 'Obras e Serviços de Engenharia'), (4, 'Locação de Imóveis'), (5, 'Alienação de Bens'), (6, 'Concessão de Uso'), (7, 'Permissão de Uso'), (8, 'Doação'), (9, 'Acordos de Cooperação'), (10, 'Outros Contratos Administrativos'), (11, 'Gestão e Manutenção'), (12, 'Tecnologia da Informação'), (13, 'Comunicação e Publicidade'), (14, 'Eventos e Festividades'), (15, 'Transporte e Logística'), (16, 'Saúde e Assistência Social'), (17, 'Educação e Cultura'), (18, 'Meio Ambiente'), (19, 'Urbanismo e Infraestrutura'), (20, 'Segurança e Vigilância'), (21, 'Serviços de Consultoria'), (22, 'Alimentos e Bebidas'), (23, 'Vestuário e Equipamentos'), (24, 'Combustíveis e Lubrificantes'), (25, 'Materiais de Consumo'), (26, 'Equipamentos e Máquinas'), (27, 'Softwares e Sistemas'), (28, 'Veículos'), (29, 'Mobiliário')], null=True, verbose_name='Tipo de Objeto do Ajuste (PNCP)')),
                ('data_criacao', models.DateTimeField(auto_now_add=True)),
                ('data_ultima_atualizacao', models.DateTimeField(auto_now=True)),
                ('criado_por', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL, verbose_name='Criado Por')),
                ('edital_origem', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='audesp_ajustes_contratuais_edital', to='licitacoes.edital', verbose_name='Edital de Origem')),
                ('processo_vinculado', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='audesp_ajustes_contratuais', to='core.processo', verbose_name='Processo Principal (SysGov)')),
                ('resultado_licitacao_origem', models.OneToOneField(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='audesp_ajuste_contratual', to='licitacoes.resultadolicitacao', verbose_name='Resultado da Licitação de Origem')),
            ],
            options={
                'verbose_name': 'AUDESP Ajuste Contratual',
                'verbose_name_plural': 'AUDESP Ajustes Contratuais',
                'ordering': ['-data_assinatura'],
            },
        ),
        migrations.CreateModel(
            name='AudespEditalDetalhado',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('municipio', models.IntegerField(verbose_name='Município (Cód. AUDESP)')),
                ('entidade', models.IntegerField(verbose_name='Entidade (Cód. AUDESP)')),
                ('codigo_edital_audesp', models.CharField(max_length=25, verbose_name='Código Edital (AUDESP)')),
                ('retificacao', models.BooleanField(default=False, verbose_name='É Retificação (AUDESP)')),
                ('recurso_bid', models.IntegerField(choices=[(1, 'Sim'), (2, 'Não'), (3, 'Não se aplica')], verbose_name='Recursos BID Envolvidos')),
                ('abertura_pre_qualificacao_bid', models.IntegerField(blank=True, choices=[(1, 'Houve Objeção'), (2, 'Não Houve Objeção'), (3, 'Não se aplica')], null=True, verbose_name='Objeção BID Abertura Pré-qualificação')),
                ('edital_pre_qualificacao_bid', models.IntegerField(blank=True, choices=[(1, 'Houve Objeção'), (2, 'Não Houve Objeção'), (3, 'Não se aplica')], null=True, verbose_name='Objeção BID Edital Pré-qualificação')),
                ('julgamento_pre_qualificacao_bid', models.IntegerField(blank=True, choices=[(1, 'Houve Objeção'), (2, 'Não Houve Objeção'), (3, 'Não se aplica')], null=True, verbose_name='Objeção BID Julgamento Pré-qualificação')),
                ('edital_2_fase_bid', models.IntegerField(blank=True, choices=[(1, 'Houve Objeção'), (2, 'Não Houve Objeção'), (3, 'Não se aplica')], null=True, verbose_name='Objeção BID Edital 2ª Fase')),
                ('julgamento_propostas_bid', models.IntegerField(blank=True, choices=[(1, 'Houve Objeção'), (2, 'Não Houve Objeção'), (3, 'Não se aplica')], null=True, verbose_name='Objeção BID Julgamento Propostas')),
                ('julgamento_negociacao_bid', models.IntegerField(blank=True, choices=[(1, 'Houve Objeção'), (2, 'Não Houve Objeção'), (3, 'Não se aplica')], null=True, verbose_name='Objeção BID Julgamento Negociação Final')),
                ('tipo_natureza', models.IntegerField(choices=[(1, 'Compras'), (2, 'Serviços'), (3, 'Obras'), (4, 'Alienações'), (5, 'Concessões'), (6, 'Permissões'), (7, 'Doações'), (8, 'Outros')], verbose_name='Tipo de Natureza')),
                ('viabilidade_contratacao', models.IntegerField(blank=True, choices=[(1, 'Sim'), (2, 'Não'), (3, 'Não se aplica')], null=True, verbose_name='Viabilidade da Contratação')),
                ('interposicao_recurso', models.IntegerField(choices=[(1, 'Sim'), (2, 'Não'), (3, 'Não se aplica')], verbose_name='Houve Interposição de Recurso')),
                ('audiencia_publica', models.IntegerField(blank=True, choices=[(1, 'Sim'), (2, 'Não'), (3, 'Não se aplica')], null=True, verbose_name='Houve Audiência Pública')),
                ('exigencia_garantia_licitantes', models.IntegerField(choices=[(1, 'Sim'), (2, 'Não'), (3, 'Não se aplica')], verbose_name='Exigência de Garantia para Licitantes')),
                ('percentual_valor_garantia', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True, verbose_name='Percentual do Valor da Garantia')),
                ('exigencia_amostra', models.IntegerField(choices=[(1, 'Sim'), (2, 'Não'), (3, 'Não se aplica')], verbose_name='Exigência de Amostra')),
                ('quitacao_tributos_federais', models.BooleanField(verbose_name='Exige Quitação Tributos Federais')),
                ('quitacao_tributos_estaduais', models.BooleanField(verbose_name='Exige Quitação Tributos Estaduais')),
                ('quitacao_tributos_municipais', models.BooleanField(verbose_name='Exige Quitação Tributos Municipais')),
                ('exigencia_visita_tecnica', models.IntegerField(blank=True, choices=[(1, 'Sim'), (2, 'Não'), (3, 'Não se aplica')], null=True, verbose_name='Exigência de Visita Técnica')),
                ('exigencia_curriculo', models.BooleanField(verbose_name='Exigência de Currículo (Visita Técnica)')),
                ('exigencia_visto_crea', models.BooleanField(verbose_name='Exigência de Visto CREA/SP (Outros Estados)')),
                ('declaracao_recursos_orcamentarios', models.BooleanField(verbose_name='Declaração de Recursos Orçamentários')),
                ('fonte_recursos_contratacao_detalhada', models.JSONField(blank=True, default=list, help_text='Lista de fontes de recursos que constam na declaração da existência de recursos orçamentários para a contratação (array de números).', null=True, verbose_name='Fontes de Recursos da Contratação')),
                ('contratacao_conduzida', models.BooleanField(verbose_name='Contratação Conduzida por Agente/Comissão')),
                ('cpfs_condutores', models.JSONField(blank=True, default=list, help_text="Lista de CPFs dos condutores da licitação (array de objetos com 'cpfCondutor').", null=True, verbose_name='CPFs dos Condutores')),
                ('exigencia_indices_economicos', models.IntegerField(choices=[(1, 'Sim'), (2, 'Não'), (3, 'Não se aplica')], verbose_name='Exigência de Índices Econômicos Mínimos')),
                ('indices_economicos', models.JSONField(blank=True, default=list, help_text='Lista de índices econômicos (array de objetos com tipoIndice, nomeIndice, valorIndice).', null=True, verbose_name='Índices Econômicos')),
                ('edital_principal', models.OneToOneField(blank=True, help_text='O Edital de licitação no sistema principal ao qual este detalhamento se refere.', null=True, on_delete=django.db.models.deletion.CASCADE, related_name='audesp_edital_detalhado', to='licitacoes.edital', verbose_name='Edital Principal (SysGov)')),
                ('processo_vinculado', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='audesp_edital_detalhados', to='core.processo', verbose_name='Processo Principal (SysGov)')),
            ],
            options={
                'verbose_name': 'AUDESP Edital Detalhado',
                'verbose_name_plural': 'AUDESP Editais Detalhados',
                'ordering': ['-edital_principal__data_publicacao'],
            },
        ),
        migrations.CreateModel(
            name='SubmissaoAudesp',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('object_id', models.PositiveIntegerField()),
                ('data_submissao', models.DateTimeField(auto_now_add=True, verbose_name='Data/Hora da Submissão')),
                ('tipo_documento', models.CharField(choices=[('ETP', 'Estudo Técnico Preliminar'), ('TR', 'Termo de Referência'), ('EDL', 'Edital de Licitação'), ('DF', 'Documento Fiscal'), ('PG', 'Pagamento'), ('CTR', 'Contrato'), ('RSL', 'Resultado da Licitação'), ('AJT', 'Ajuste Contratual/Ata AUDESP'), ('ARP', 'Ata de Registro de Preços (AUDESP)'), ('EMP', 'Empenho de Contrato (AUDESP)')], max_length=5, verbose_name='Tipo de Documento AUDESP')),
                ('status', models.CharField(choices=[('GERADO', 'Gerado (JSON/XML)'), ('ERRO_GERACAO', 'Erro na Geração'), ('ENVIADO', 'Enviado ao AUDESP'), ('ERRO_ENVIO', 'Erro no Envio'), ('VALIDADO', 'Validado pelo AUDESP'), ('REJEITADO', 'Rejeitado pelo AUDESP')], default='GERADO', max_length=15, verbose_name='Status da Submissão')),
                ('mensagem_status', models.TextField(blank=True, help_text='Detalhes sobre o status da submissão ou erros ocorridos.', null=True, verbose_name='Mensagem de Status/Erro')),
                ('arquivo_gerado', models.FileField(blank=True, null=True, upload_to='audesp_submissoes/%Y/%m/%d/', verbose_name='Arquivo Gerado (JSON/XML)')),
                ('content_type', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='contenttypes.contenttype')),
                ('enviado_por', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL, verbose_name='Enviado por')),
            ],
            options={
                'verbose_name': 'Submissão AUDESP',
                'verbose_name_plural': 'Submissões AUDESP',
                'ordering': ['-data_submissao'],
            },
        ),
        migrations.CreateModel(
            name='AudespAtaRegistroPrecos',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('municipio', models.IntegerField(verbose_name='Município (Cód. AUDESP)')),
                ('entidade', models.IntegerField(verbose_name='Entidade (Cód. AUDESP)')),
                ('codigo_edital_audesp', models.CharField(max_length=30, verbose_name='Código do Edital (AUDESP)')),
                ('codigo_ata_audesp', models.CharField(max_length=30, unique=True, verbose_name='Código da Ata (AUDESP)')),
                ('ano_compra', models.IntegerField(verbose_name='Ano da Compra/Contratação')),
                ('retificacao', models.BooleanField(default=False, verbose_name='É Retificação (AUDESP)')),
                ('itens_licitados_ids', models.JSONField(blank=True, default=list, null=True, verbose_name='IDs dos Itens Licitados')),
                ('numero_ata_registro_preco', models.CharField(max_length=30, verbose_name='Número da Ata de Registro de Preço')),
                ('ano_ata', models.IntegerField(verbose_name='Ano da Ata')),
                ('data_assinatura', models.DateField(verbose_name='Data de Assinatura')),
                ('data_vigencia_inicio', models.DateField(verbose_name='Data de Início da Vigência')),
                ('data_vigencia_fim', models.DateField(verbose_name='Data de Fim da Vigência')),
                ('data_criacao', models.DateTimeField(auto_now_add=True)),
                ('data_ultima_atualizacao', models.DateTimeField(auto_now=True)),
                ('criado_por', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL, verbose_name='Criado Por')),
                ('edital_origem', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='atas_rp_audesp_edital', to='licitacoes.edital', verbose_name='Edital de Origem')),
                ('processo_vinculado', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='atas_rp_audesp_processo', to='core.processo', verbose_name='Processo Principal (SysGov)')),
            ],
            options={
                'verbose_name': 'AUDESP Ata de Registro de Preços',
                'verbose_name_plural': 'AUDESP Atas de Registro de Preços',
                'ordering': ['-data_assinatura'],
                'unique_together': {('municipio', 'entidade', 'codigo_ata_audesp', 'ano_ata')},
            },
        ),
        migrations.CreateModel(
            name='AudespEmpenhoContrato',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('municipio', models.IntegerField(verbose_name='Município (Cód. AUDESP)')),
                ('entidade', models.IntegerField(verbose_name='Entidade (Cód. AUDESP)')),
                ('codigo_contrato_audesp', models.CharField(help_text='Código único que identifica o ajuste (contrato) ao qual o empenho se refere.', max_length=30, verbose_name='Código do Contrato (AUDESP)')),
                ('retificacao', models.BooleanField(default=False, help_text='True se o documento é uma retificação.', verbose_name='É Retificação (AUDESP)')),
                ('numero_empenho', models.CharField(help_text='Número do empenho no sistema de origem.', max_length=35, unique=True, verbose_name='Número do Empenho')),
                ('ano_empenho', models.IntegerField(verbose_name='Ano do Empenho')),
                ('data_emissao_empenho', models.DateField(verbose_name='Data de Emissão do Empenho')),
                ('data_criacao', models.DateTimeField(auto_now_add=True)),
                ('data_ultima_atualizacao', models.DateTimeField(auto_now=True)),
                ('ajuste_contratual_audesp', models.ForeignKey(blank=True, help_text='Ajuste/Formalização Contratual ao qual este empenho se refere.', null=True, on_delete=django.db.models.deletion.CASCADE, related_name='empenhos_audesp', to='integracao_audesp.audespajustecontratual', verbose_name='Ajuste Contratual (AUDESP)')),
                ('criado_por', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL, verbose_name='Criado Por')),
                ('documento_fiscal_origem', models.ForeignKey(blank=True, help_text='Documento fiscal original que registrou este empenho.', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='empenhos_audesp', to='financeiro.documentofiscal', verbose_name='Documento Fiscal de Origem')),
                ('processo_vinculado', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='empenhos_audesp', to='core.processo', verbose_name='Processo Principal (SysGov)')),
            ],
            options={
                'verbose_name': 'AUDESP Empenho de Contrato',
                'verbose_name_plural': 'AUDESP Empenhos de Contrato',
                'ordering': ['-data_emissao_empenho'],
                'unique_together': {('municipio', 'entidade', 'numero_empenho', 'ano_empenho')},
            },
        ),
    ]
